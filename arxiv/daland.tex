\documentclass[12pt,reqno]{article}

\usepackage[usenames]{color}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amscd}
\usepackage{graphicx}
\usepackage{mathrsfs}

\usepackage[colorlinks=true,
linkcolor=webgreen,
filecolor=webbrown,
citecolor=webgreen]{hyperref}

\definecolor{webgreen}{rgb}{0,.5,0}
\definecolor{webbrown}{rgb}{.6,0,0}

\usepackage{color}
\usepackage{fullpage}
\usepackage{float}

\usepackage{graphics}
\usepackage{latexsym}
\usepackage{epsf}
\usepackage{breakurl}

\setlength{\textwidth}{6.5in}
\setlength{\oddsidemargin}{.1in}
\setlength{\evensidemargin}{.1in}
\setlength{\topmargin}{-.1in}
\setlength{\textheight}{8.4in}

\newcommand{\seqnum}[1]{\href{https://oeis.org/#1}{\rm \underline{#1}}}

\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\xenc}{\mathrm{xenc}}
\let\up=\textsuperscript
\newcommand{\ct}{c}
\usepackage{bigints}
\def\restmod#1#2{#1\ (\mathrm{mod}\ #2)} %%% for the congruences


\begin{document}

\begin{center}
\epsfxsize=4in
\end{center}

\theoremstyle{plain}
\newtheorem{theorem}{Theorem}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{conjecture}[theorem]{Conjecture}

\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}

\begin{center}
\vskip 1cm{\Large\bf Remarks on a Nontrivial Permutation of the Natural Numbers
}
\vskip 1cm
\large
Robert Daland \\
Siri Natural Language Understanding \\
Apple, Inc \\
\href{mailto:r.daland@gmail.com}{\tt r.daland@gmail.com} 
\end{center}

\vskip .2 in

\begin{abstract}
Permutations on the natural numbers are theoretically uncountable. As far as this author is aware, examples are somewhat rare in the literature. This paper offers a preliminary typology of ``simple'' examples, and also illustrates a ``nonsimple'' one. \end{abstract}

\section{Introduction}

What can a permutation on the natural numbers look like? And what constraints does the structure of the natural numbers impose on the space of permutations of this countably infinite set?

\section{Notation and conventions}

For this article, sometimes it matters whether the natural numbers begin at 0 or 1, and sometimes it does not. This article will default to natural numbers beginning at 1. \begin{itemize} 
  \item $\mathbb{N} = \{ 1, 2, \ldots \}$
\end{itemize} When it is important to include 0, the notation $\mathbb{N}_0  = \{0, 1, 2, \ldots \}$ will be used.

This article will use the term \textbf{natperm} to refer a permutation on the natural numbers; that is, an invertible map $\pi: \mathbb{N} \rightarrow \mathbb{N}$. The \textbf{support} of a natperm is the set of values which are not fixed points; in other words the subset of the natural numbers for which the natperm is not the identity mapping.

This article will use the term \textbf{orbit} to refer to the collection of values generated by repeated application of a map, starting from some reference value. The term \textbf{cycle} will be reserved for orbits in which the same value repeats after finitely many iterations of the map, i.e. $\pi^k(n) = n$ for some positive $k$. Orbits may include preimages of the reference value, i.e. a sequence of values may extend ``backwards'' when that is well-defined.

\section{Block cyclic natperms}

This section will define and illustrate natperms of increasing complexity, all having the following properties: \begin{itemize}
  \item they can be represented as the finite or infinite product of essentially finite permutations
  \item the maximum perturbation $|\pi(n) - n|$ scales with the magnitude of $n$
 \end{itemize}
 
Prior to discussing specific natperms, it is worth highlighting that natperms are closed under finite composition. That is, if $\pi$ and $\sigma$ are natperms, so is $\pi \circ \sigma(n) = \pi(\sigma(n))$ (and $\sigma \circ \pi$, but composition is not generally commutative). This article does not treat infinite composition in the general case. However, a number of cases in this article can be understood as infinite compositions of disjoint natperms.

\subsection{Finite natperms}

It is trivial to lift a finite permutation (on positive integers) to a natperm. For example, the permutation $\xi = (1 \ 2)$ can be extended by applying the identity map to all natural numbers not in the original domain, $\tilde{\xi} = (1 \ 2)(3)(4)\cdots$. This article will refer to such mapping as \textbf{finite natperms} (i.e. a permutation on the natural numbers, but with finite support).

\subsection{Bounded block cyclic natperms}

Consider the parity-swapping map:
\begin{equation}
    \pi(n) = \begin{cases}
        n + 1, & \text{if n is odd} \\
        n - 1, & \text{if n is even}
    \end{cases}
\end{equation}

This mapping is a natperm, whose behavior can be illustrated with the cycle notation $pi = (1 \ 2)(3 \ 4)(5 \ 6)\cdots$. The definition given above makes it particularly clear that this mapping covers the natural numbers.

An alternative and more general way to view the parity-swapping natperm is as the infinite product of finite natperms on disjoint blocks. Formally, define a \textbf{block partition} of the natural numbers by an infinite sequence of cutoffs ${b_j}_{j=1}^{\inf}$. The first block is defined $B_1 = \{ 1 \leq n < b_1 \| n \in \mathbb{N} \}$, in other words the contiguous block of natural numbers less than the first cutoff. Remaining blocks are defined analogously,  $B_j = \{ b_{j-1} \leq n < b_j \}$. A block partition is bounded if there is a maximum block size, i.e. $\exists M \ni |b_j - b_{j-1}| < M$. A mapping is a bounded block cyclic natperm it if can be represented by a sequence of cycles on blocks, generated by a bounded block partition.

For the parity-swapping map defined above, the block partition is defined by the cutoffs $\bar{b} = \{ 3, 5, 7, \ldots \}$, and the individual blocks simply have the shift-by-1 map, gluing the top of each block to its bottom. The space of variants is easy to imagine -- larger block sizes, block permutations other than the shift-by-1 map. A notable property of bounded block cyclic natperms is that the mapping is essentially ``local'' -- every value $n$ is mapped to some other value near $n$. More specifically, $\pi(n) - n \leq M$ for some $M$, where $M$ is the partition block bound. In fact, the condition is even stronger: the entire orbit of $n$ is constrained to be local to $n$ in this sense.

Finite natperms are special case of bounded block cyclic natperms. Bounded block cyclis natperms are in turn a special case of unbounded block cyclic natperms, which are defined and illustrated in the next section.

\subsection{Unbounded block cyclic natperms}

The definition of block partition requires a countably infinite number of finite blocks, but does not impose a cutoff on block size. The previous example of the parity-swapping map illustrated bounded (equal) blocks. This section gives an example with unbounded blocks. 

Consider the following mapping:
\begin{equation}
    \pi(n) = \begin{cases}
        1, & \text{if} n = 1 \\
        2^{k-1} + 1, & \text{if}\ n = 2^k \ \text{for some positive integer}\ k \\
        n + 1, & \text{otherwise}
    \end{cases}
\end{equation}

This mapping is a natperm, and can be decomposed into an infinite product of finite cycles, whose length grows geometrically. The first several cycles are shown below:
$$ (1)(2)(3 \ 4)(5 \ 6 \ 7 \ 8)\cdots $$ 
% TODO: put block 2^0, 2^1, ... annotations in
This mapping partitions the natural numbers into \textbf{blocks}, with a finite permutation defined on each block. In the example immediately above, the blocks are the set of natural numbers ranging from $2^{k-1} + 1$ to $2^k$, and the finite permutation is simply the shift map, but gluing the top of the block to its bottom to define a simple cycle.

The key difference between this natperm and the parity-swapping one is the nature of the ``locality'' condition. Values are still always mapped within their block; but because the block size is unbounded, for every $M$ there is some $n$ such that $|\pi(n) - n| > M$.

\section{Shift and glue natperms}

As a starting point, we may observe that there are many functions which do define permutations on the integers, but which do not define permutations on the natural numbers. The simplest example is the shift-by-1 function $\sigma_1(n) = n + 1$, which can be decomposed into a single, countably infinite orbit:
$$ \cdots \rightarrow -2 \rightarrow -1 \rightarrow 0 \rightarrow 1 \rightarrow \cdots $$
However, when the domain is restricted to natural numbers, there is a least element, which has no preimage. Therefore the mapping is not invertible, so cannot be a permutation.

A related example is the shift-by-k function $\sigma_k(n) = n + k$. This permutation on the integers can be decomposed into $k$ distinct countably infinite orbits. However, just as with the shift-by-1 function, restricting the domain to the natural numbers eliminates invertibility, again because each orbit has a least element. This paper will use the term \textbf{strand} to the set of natural numbers in a single orbit of a shift-by-k function. It is convenient to refer to the strand by its least element. For example, $\lfloor 1 \rfloor$ denotes the strand $\{ 1, 1 + k, 1 + 2k, \ldots \}$ generated by $\sigma_k(n)$. Note that $\sigma_{-k}(n)$ generates the same strands as $\sigma_k(n)$.

It is possible to generate a permutation on the natural numbers by gluing together the two strands of $\sigma_2$. This is achieved by traversing one strand in the opposite of the canonical order ("counting down"), switching over at the least elements, and then traversing the remaining strand in the canonical order ("counting up"). For example, the permutation ($\ldots$, 6, 4, 2, 1, 3, 5, $\ldots$) is achieved with this mapping:
\begin{equation}
    \pi(n) = \begin{cases}
        \sigma_{-2}(n), & \text{if}\ n \text{ is even and greater than 2} \\
        1, & \text{if}\ n = 2 \\
        \sigma_2(n), & \text{if}\ n \text{ is odd} 
    \end{cases}
\end{equation}

The same approach can be applied to permutations with any even number of strands. The shift permutation $\sigma_{2k}$ generates strands $\{ \lfloor 1 \rfloor,  \lfloor 2 \rfloor, \ldots, \lfloor 2k \rfloor, \}$. These are paired off, glued at their least elements, and assigned a direction (i.e. which strand to traverse by counting down, and which to traverse by counting up), resulting in $k$ orbits.

% TODO: put an image here with N_k arranged in a circle as usual, and with strands emanating from N_k with the gluing indicated

As noted previously, shift-and-glue permutations can be composed with other natperms. For example, a kind of "strand switching" can be achieved by composing a shift-and-glue natperm with one or more lifted 2-cycles, as shown in the diagram below.

% TODO: do the same shift-and-glue natperm as Fig. 1, but with a 2-cycle that transposes some elements above the least elements

Of course, shift-and-glue natperms can also be composed with bounded block cyclic natperms. Visualizing the structure of an example is left to future research.


\end{document}

